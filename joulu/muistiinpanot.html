<!doctype html>
<html lang="en" class="h-100">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>Sy√∂t√§ koodi</title>
    <script>
        function check(event){
            event.preventDefault();
            if(koodi.value == "TONTTU" || koodi.value == "tonttu" || koodi.value == "Tonttu"){
                document.getElementById("kirjaudu").classList.remove('d-none');
                setTimeout(redirect.bind(null,"/joulu/kirjanpito"),1500) // kirjanpito
            } else if (koodi.value == 568){ //lukon koodi
                document.getElementById("kirjaudu").classList.remove('d-none');
                setTimeout(redirect.bind(null,"/joulu/lokikirja"),1500) // Lokikirja                
            } else {
                document.getElementById("virhe").classList.remove('d-none');
            }
        }
        function redirect(url){
            window.location.href = url;
        }

        function setCookie(cname, cvalue) {
            var d = new Date();
            d.setTime(d.getTime() + (365*24*60*60*1000));
            var expires = "expires="+ d.toUTCString();
            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }

        var urlParams;
        (window.onpopstate = function () {
            var match,
                pl     = /\+/g,  // Regex for replacing addition symbol with a space
                search = /([^&=]+)=?([^&]*)/g,
                decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
                query  = window.location.search.substring(1);

            urlParams = {};
            while (match = search.exec(query))
            urlParams[decode(match[1])] = decode(match[2]);
        })();

        function getCookie(cname) {
            var name = cname + "=";
            var decodedCookie = decodeURIComponent(document.cookie);
            var ca = decodedCookie.split(';');
            for(var i = 0; i <ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
                }
            }
            return "";
        }

        function checkStatus(){
            setCookie(Object.keys(urlParams)[0],Object.values(urlParams)[0])
            if (getCookie("vihje1") == 2412){
                document.getElementById("vihje1").classList.remove('d-none');
            }
            if (getCookie("vihje2") == 1215){
                document.getElementById("vihje2").classList.remove('d-none');
            }
            if (getCookie("vihje2") == 3542){
                document.getElementById("vihje3").classList.remove('d-none');
            }
            if (getCookie("vihje2") == 4586){
                document.getElementById("vihje4").classList.remove('d-none');
            }
        }

    </script>
  </head>

<body class="h-100" onload="checkStatus()">
      

    <div class="container h-100 ">
        <div class="row h-100 justify-content-center align-items-center">
            <div class="col-10 col-md-8 col-lg-6">
                <h1 class="pb-4">Tonttujen salaiset muistiinpanot</h1>
                <form class="form-example" onsubmit="check(event)">
                    <h3>Sy√∂t√§ salasana</h3>
                    <div class="form-group">
                        <input type="text" class="form-control text-center" id="koodi" placeholder="" name="koodi">
                    </div>
                    <div id="kirjaudu" class="d-none alert alert-success fade show" role="alert">
                        <strong>Jes!</strong> Kirjaudutaan sis√§√§n...
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                    <div id="virhe" class="d-none alert alert-danger alert-dismissible fade show" role="alert">
                        <strong>Hupsista!</strong> Nyt taisit muistaa v√§√§r√§n salasanan.
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                    <button type="submit" class="my-3 btn btn-primary btn-customized w-100">Kirjaudu</button>
                </form>
                <div class="d-inline-flex">
                    <h1 id="vihje1" class="d-none">üïî</h1>
                    <h1 id="vihje2" class="d-none">üßíüèª</h1>
                    <h1 id="vihje3" class="d-none">‚õ™</h1>
                    <h1 id="vihje4" class="d-none">üéÖüèª</h1>
                </div>
            </div>
        </div>
    </div>
      
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>
</html>